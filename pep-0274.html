<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/peps/pep-0001.html for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<head>
  <title>PEP 274 -- Dict Comprehensions</title>
  <link rel="STYLESHEET" href="style.css" type="text/css" />
</head>
<body bgcolor="white">
<table class="navigation" cellpadding="0" cellspacing="0"
       width="100%" border="0">
<tr><td class="navicon" width="150" height="35">
<a href="../" title="Python Home Page">
<img src="../pics/PyBanner004.gif" alt="[Python]"
 border="0" width="150" height="35" /></a></td>
<td class="textlinks" align="left">
[<b><a href="../">Python Home</a></b>]
[<b><a href=".">PEP Index</a></b>]
[<b><a href="pep-0274.txt">PEP Source</a></b>]
</td></tr></table>
<div class="header">
<table border="0">
  <tr><th>PEP:&nbsp;</th><td>274</td></tr>
  <tr><th>Title:&nbsp;</th><td>Dict Comprehensions</td></tr>
  <tr><th>Version:&nbsp;</th><td>$Revision$</td></tr>
  <tr><th>Last-Modified:&nbsp;</th><td><a href="https://hg.python.org/peps/file/tip/pep-0274.txt">$Date$</a> </td></tr>
  <tr><th>Author:&nbsp;</th><td>Barry Warsaw &lt;barry&#32;&#97;t&#32;python.org&gt;</td></tr>
  <tr><th>Status:&nbsp;</th><td>Final</td></tr>
  <tr><th>Type:&nbsp;</th><td>Standards Track</td></tr>
  <tr><th>Created:&nbsp;</th><td>25-Oct-2001</td></tr>
  <tr><th>Python-Version:&nbsp;</th><td>2.7, 3.0 (originally 2.3)</td></tr>
  <tr><th>Post-History:&nbsp;</th><td>29-Oct-2001</td></tr>
</table>
</div>
<hr />
<div class="content">
<h3>Abstract</h3>
<pre>
    <a href="pep-0202.html">PEP 202</a> introduces a syntactical extension to Python called the
    &quot;list comprehension&quot;[1].  This PEP proposes a similar syntactical
    extension called the &quot;dictionary comprehension&quot; or &quot;dict
    comprehension&quot; for short.  You can use dict comprehensions in ways
    very similar to list comprehensions, except that they produce
    Python dictionary objects instead of list objects.


</pre>
<h3>Resolution</h3>
<pre>
    This PEP was originally written for inclusion in Python 2.3.  It
    was withdrawn after observation that substantially all of its
    benefits were subsumed by generator expressions coupled with the
    dict() constructor.

    However, Python 2.7 and 3.0 introduces this exact feature, as well
    as the closely related set comprehensions.  On 2012-04-09, the PEP
    was changed to reflect this reality by updating its Status to
    Accepted, and updating the Python-Version field.  The Open
    Questions section was also removed since these have been long
    resolved by the current implementation.


</pre>
<h3>Proposed Solution</h3>
<pre>
    Dict comprehensions are just like list comprehensions, except that
    you group the expression using curly braces instead of square
    braces.  Also, the left part before the `for&#x27; keyword expresses
    both a key and a value, separated by a colon.  The notation is
    specifically designed to remind you of list comprehensions as
    applied to dictionaries.


</pre>
<h3>Rationale</h3>
<pre>
    There are times when you have some data arranged as a sequences of
    length-2 sequences, and you want to turn that into a dictionary.
    In Python 2.2, the dict() constructor accepts an argument that is
    a sequence of length-2 sequences, used as (key, value) pairs to
    initialize a new dictionary object.

    However, the act of turning some data into a sequence of length-2
    sequences can be inconvenient or inefficient from a memory or
    performance standpoint.  Also, for some common operations, such as
    turning a list of things into a set of things for quick duplicate
    removal or set inclusion tests, a better syntax can help code
    clarity.

    As with list comprehensions, an explicit for loop can always be
    used (and in fact was the only way to do it in earlier versions of
    Python).  But as with list comprehensions, dict comprehensions can
    provide a more syntactically succinct idiom that the traditional
    for loop.


</pre>
<h3>Semantics</h3>
<pre>
    The semantics of dict comprehensions can actually be demonstrated
    in stock Python 2.2, by passing a list comprehension to the
    built-in dictionary constructor:

    &gt;&gt;&gt; dict([(i, chr(65+i)) for i in range(4)])

    is semantically equivalent to

    &gt;&gt;&gt; {i : chr(65+i) for i in range(4)}

    The dictionary constructor approach has two distinct disadvantages
    from the proposed syntax though.  First, it isn&#x27;t as legible as a
    dict comprehension.  Second, it forces the programmer to create an
    in-core list object first, which could be expensive.


</pre>
<h3>Examples</h3>
<pre>
    &gt;&gt;&gt; print {i : chr(65+i) for i in range(4)}
    {0 : &#x27;A&#x27;, 1 : &#x27;B&#x27;, 2 : &#x27;C&#x27;, 3 : &#x27;D&#x27;}

    &gt;&gt;&gt; print {k : v for k, v in someDict.iteritems()} == someDict.copy()
    1

    &gt;&gt;&gt; print {x.lower() : 1 for x in list_of_email_addrs}
    {&#x27;barry@zope.com&#x27;   : 1, &#x27;barry@python.org&#x27; : 1, &#x27;guido@python.org&#x27; : 1}

    &gt;&gt;&gt; def invert(d):
    ...     return {v : k for k, v in d.iteritems()}
    ...
    &gt;&gt;&gt; d = {0 : &#x27;A&#x27;, 1 : &#x27;B&#x27;, 2 : &#x27;C&#x27;, 3 : &#x27;D&#x27;}
    &gt;&gt;&gt; print invert(d)
    {&#x27;A&#x27; : 0, &#x27;B&#x27; : 1, &#x27;C&#x27; : 2, &#x27;D&#x27; : 3}

    &gt;&gt;&gt; {(k, v): k+v for k in range(4) for v in range(4)}
    ... {(3, 3): 6, (3, 2): 5, (3, 1): 4, (0, 1): 1, (2, 1): 3,
         (0, 2): 2, (3, 0): 3, (0, 3): 3, (1, 1): 2, (1, 0): 1,
         (0, 0): 0, (1, 2): 3, (2, 0): 2, (1, 3): 4, (2, 2): 4, (
         2, 3): 5}


</pre>
<h3>Implementation</h3>
<pre>
    All implementation details were resolved in the Python 2.7 and 3.0
    time-frame. 


</pre>
<h3>References</h3>
<pre>
    [1] <a href="pep-0202.html">PEP 202</a>, List Comprehensions
        <a href="http://www.python.org/dev/peps/pep-0202/">http://www.python.org/dev/peps/pep-0202/</a>


</pre>
<h3>Copyright</h3>
<pre>
    This document has been placed in the public domain.



</pre>
</div>
</body>
</html>
