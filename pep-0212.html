<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/peps/pep-0001.html for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<head>
  <title>PEP 212 -- Loop Counter Iteration</title>
  <link rel="STYLESHEET" href="style.css" type="text/css" />
</head>
<body bgcolor="white">
<table class="navigation" cellpadding="0" cellspacing="0"
       width="100%" border="0">
<tr><td class="navicon" width="150" height="35">
<a href="../" title="Python Home Page">
<img src="../pics/PyBanner056.gif" alt="[Python]"
 border="0" width="150" height="35" /></a></td>
<td class="textlinks" align="left">
[<b><a href="../">Python Home</a></b>]
[<b><a href=".">PEP Index</a></b>]
[<b><a href="pep-0212.txt">PEP Source</a></b>]
</td></tr></table>
<div class="header">
<table border="0">
  <tr><th>PEP:&nbsp;</th><td>212</td></tr>
  <tr><th>Title:&nbsp;</th><td>Loop Counter Iteration</td></tr>
  <tr><th>Version:&nbsp;</th><td>$Revision$</td></tr>
  <tr><th>Last-Modified:&nbsp;</th><td><a href="https://hg.python.org/peps/file/tip/pep-0212.txt">$Date$</a> </td></tr>
  <tr><th>Author:&nbsp;</th><td>Peter Schneider-Kamp &lt;nowonder&#32;&#97;t&#32;nowonder.de&gt;</td></tr>
  <tr><th>Status:&nbsp;</th><td>Deferred</td></tr>
  <tr><th>Type:&nbsp;</th><td>Standards Track</td></tr>
  <tr><th>Created:&nbsp;</th><td>22-Aug-2000</td></tr>
  <tr><th>Python-Version:&nbsp;</th><td>2.1</td></tr>
  <tr><th>Post-History:&nbsp;</th><td></td></tr>
</table>
</div>
<hr />
<div class="content">
<h3>Introduction</h3>
<pre>
    This PEP describes the often proposed feature of exposing the loop
    counter in for-loops.  This PEP tracks the status and ownership of
    this feature.  It contains a description of the feature and
    outlines changes necessary to support the feature.  This PEP
    summarizes discussions held in mailing list forums, and provides
    URLs for further information, where appropriate.  The CVS revision
    history of this file contains the definitive historical record.


</pre>
<h3>Motivation</h3>
<pre>
    Standard for-loops in Python iterate over the elements of a
    sequence[1].  Often it is desirable to loop over the indices or
    both the elements and the indices instead.

    The common idioms used to accomplish this are unintuitive.  This
    PEP proposes two different ways of exposing the indices.


</pre>
<h3>Loop counter iteration</h3>
<pre>
    The current idiom for looping over the indices makes use of the
    built-in &#x27;range&#x27; function:

        for i in range(len(sequence)):
            # work with index i

    Looping over both elements and indices can be achieved either by the
    old idiom or by using the new &#x27;zip&#x27; built-in function[2]:

        for i in range(len(sequence)):
            e = sequence[i]
            # work with index i and element e

    or

        for i, e in zip(range(len(sequence)), sequence):
            # work with index i and element e


</pre>
<h3>The Proposed Solutions</h3>
<pre>
    There are three solutions that have been discussed.  One adds a
    non-reserved keyword, the other adds two built-in functions.
    A third solution adds methods to sequence objects.


</pre>
<h3>Non-reserved keyword 'indexing'</h3>
<pre>
    This solution would extend the syntax of the for-loop by adding
    an optional &#x27;&lt;variable&gt; indexing&#x27; clause which can also be used
    instead of the &#x27;&lt;variable&gt; in&#x27; clause..

    Looping over the indices of a sequence would thus become:

        for i indexing sequence:
            # work with index i

    Looping over both indices and elements would similarly be:

        for i indexing e in sequence:
            # work with index i and element e


</pre>
<h3>Built-in functions 'indices' and 'irange'</h3>
<pre>
    This solution adds two built-in functions &#x27;indices&#x27; and &#x27;irange&#x27;.
    The semantics of these can be described as follows:

        def indices(sequence):
            return range(len(sequence))

        def irange(sequence):
            return zip(range(len(sequence)), sequence)

    These functions could be implemented either eagerly or lazily and
    should be easy to extend in order to accept more than one sequence
    argument.

    The use of these functions would simplify the idioms for looping
    over the indices and over both elements and indices:

        for i in indices(sequence):
            # work with index i

        for i, e in irange(sequence):
            # work with index i and element e


</pre>
<h3>Methods for sequence objects</h3>
<pre>
    This solution proposes the addition of &#x27;indices&#x27;, &#x27;items&#x27;
    and &#x27;values&#x27; methods to sequences, which enable looping over
    indices only, both indices and elements, and elements only
    respectively.

    This would immensely simplify the idioms for looping over indices
    and for looping over both elements and indices:

        for i in sequence.indices():
            # work with index i

        for i, e in sequence.items():
            # work with index i and element e

    Additionally it would allow to do looping over the elements
    of sequences and dicitionaries in a consistent way:

        for e in sequence_or_dict.values():
            # do something with element e


</pre>
<h3>Implementations</h3>
<pre>
    For all three solutions some more or less rough patches exist
    as patches at SourceForge:

        &#x27;for i indexing a in l&#x27;: exposing the for-loop counter[3]
        add indices() and irange() to built-ins[4]
        add items() method to listobject[5]

    All of them have been pronounced on and rejected by the BDFL.

    Note that the &#x27;indexing&#x27; keyword is only a NAME in the
    grammar and so does not hinder the general use of &#x27;indexing&#x27;.


</pre>
<h3>Backward Compatibility Issues</h3>
<pre>
    As no keywords are added and the semantics of existing code
    remains unchanged, all three solutions can be implemented
    without breaking existing code.


</pre>
<h3>Copyright</h3>
<pre>
    This document has been placed in the public domain.


</pre>
<h3>References</h3>
<pre>
    [1] <a href="http://docs.python.org/reference/compound_stmts.html#for">http://docs.python.org/reference/compound_stmts.html#for</a>
    [2] Lockstep Iteration, <a href="pep-0201.html">PEP 201</a>
    [3] <a href="http://sourceforge.net/patch/download.php?id=101138">http://sourceforge.net/patch/download.php?id=101138</a>
    [4] <a href="http://sourceforge.net/patch/download.php?id=101129">http://sourceforge.net/patch/download.php?id=101129</a>
    [5] <a href="http://sourceforge.net/patch/download.php?id=101178">http://sourceforge.net/patch/download.php?id=101178</a>



</pre>
</div>
</body>
</html>
